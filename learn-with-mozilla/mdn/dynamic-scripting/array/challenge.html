<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Array-Challenge</title>
    <style>
      body {
        font: 1.2em / 1.5 system-ui;
        margin: 0 auto;
        width: 500px;
      }

      fieldset {
        border: 0;
      }

      fieldset,
      legend {
        padding: 0;
        margin: 0;
      }

      input[type="text"] {
        margin-top: 5px;
        padding: 5px;
        width: 50%;
        display: block;
      }

      div,
      fieldset {
        margin-top: 20px;
      }

      p {
        margin-top: 10px;
        background: #ffc125;
        padding: 20px;
        visibility: hidden;
      }
    </style>
  </head>
  <body>
    <div>
      <label for="custom-name">Enter custom name:</label>
      <input id="custom-name" type="text" placeholder="" />
    </div>
    <fieldset>
      <legend>Choose locale:</legend>
      <label for="us">US</label
      ><input id="us" type="radio" name="uk-us" value="us" checked />
      <label for="uk">UK</label
      ><input id="uk" type="radio" name="uk-us" value="uk" />
    </fieldset>
    <div>
      <button class="generate">Generate random story</button>
    </div>
    <!-- Thanks a lot to Willy Aguirre for his help with the code for this assessment -->
    <p class="story"></p>

    <script>
      // 1. COMPLETE VARIABLE DEFINITIONS AND RANDOM FUNCTION

      const customName = document.getElementById("custom-name");
      const generateBtn = document.querySelector(".generate");
      const story = document.querySelector(".story");

      function randomValueFromArray(array) {
        const random = Math.floor(Math.random() * array.length);
        return array[random];
      }

      // 2. RAW TEXT STRINGS

      const characters = ["Willy the Goblin", "Big Daddy", "Father Christmas"];

      const places = ["the soup kitchen", "Disneyland", "the White House"];

      const events = [
        "spontaneously combusted",
        "melted into a puddle on the sidewalk",
        "turned into a slug and slithered away",
      ];

      // 3. PARTIAL RETURN RANDOM STRING FUNCTION

      function returnRandomStoryString() {
        const randomCharacter = randomValueFromArray(characters);
        const randomPlace = randomValueFromArray(places);
        const randomEvent = randomValueFromArray(events);
        const storyText = `It was 94 Fahrenheit outside, so ${randomCharacter} went for a walk. When they got to ${randomPlace}, they stared in horror for a few moments, then ${randomEvent}. Bob saw the whole thing, but was not surprised â€” ${randomCharacter} weighs 300 pounds, and it was a hot day.`;
        return storyText;
      }

      // 4. EVENT LISTENER AND PARTIAL GENERATE FUNCTION DEFINITION
      
      generateBtn.addEventListener("click", generateStory);
      
      function generateStory() {
        let newStory = returnRandomStoryString();

        if (customName.value !== "") {
          const name = customName.value;
          newStory = newStory.replace("Bob", name)
        }

        if (document.getElementById("uk").checked) {
          const weight = Math.round(300 / 14) + " stone";
          const temperature = Math.round((94 - 32) * (5 / 9)) + " Celcius";
          newStory = newStory.replace("300 pounds", weight);
          newStory = newStory.replace("94 Fahrenheit", temperature);
        }

        // TODO: replace "" with the correct expression
        story.textContent = newStory;
        story.style.visibility = "visible";
      }
    </script>
  </body>
</html>
